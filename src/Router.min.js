var Router=function(){var a=function(a){this._resolved=!1,this._route={routeUrl:[],templateUrl:[],otherwise:""},this._cache={},this._view=a||"body",this.init()},b=a.prototype;return b.init=function(){$(window).on("hashchange",{ctx:this},b.onHashChange)},b.getHash=function(){return window.location.hash},b.trimHashUrl=function(a){return a.substring(2)},b.getRoute=function(){return this.trimHashUrl(this.getHash())},b.when=function(a,b){var c=this.trimHashUrl(this.getHash());return this._route.routeUrl[this._route.routeUrl.length]=a,this._route.templateUrl[this._route.templateUrl.length]=b,a!=c?this:(this.loadTemplate(a,b),this._resolved=!0,this)},b.otherwise=function(a){return this._route.otherwise=a,this._resolved?(this._resolved=!1,0):(this.loadTemplate("otherwise",a),1)},b.onHashChange=function(a){var b=a.data.ctx;b.refreshView()},b.refreshView=function(){for(var a=this.getRoute(),b=this._route.otherwise,c=0;c<this._route.routeUrl.length;c++)a==this._route.routeUrl[c]&&(b=this._route.templateUrl[c]);return this.loadTemplate(a,b),0},b.storeCache=function(a,b){this._cache[a]=b},b.loadCache=function(a){return this._cache[a]},b.isCached=function(a){return this._cache[a]},b.loadTemplate=function(a,b){var c=this;$.ajax({url:b,type:"GET",dataType:"html",beforeSend:function(){return c.isCached(a)?($(c._view).empty().append(c.loadCache(a)),!1):!0},success:function(b){c.storeCache(a,b),$(c._view).empty().append(b)}})},a}();